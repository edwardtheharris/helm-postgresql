###
# ```{rubric} StatefulSet Test
# ```
# ---
# Tests the StatefulSet template values.
#
# ```{literalinclude} /tests/statefulset_test.yaml
# :language: yaml
# :caption: tests/statefulset_test.yaml
# :start-at: "suite: PostgreSQL StatefulSet Test Suite"
# ```
suite: PostgreSQL StatefulSet Test Suite
release:
  name: postgresql
templates:
  - "templates/statefulset.yaml"
set:
  type: StatefulSet
values:
  - ../values.yaml

tests:
  - it: "should render StatefulSet with correct metadata"
    asserts:
      - isKind:
          of: StatefulSet
      - equal:
          path: metadata.name
          value: postgresql
  - it: should render statefulset correctly
    asserts:
      - matchSnapshot:
          path: spec
